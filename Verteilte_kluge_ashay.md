# Decentralization Project Proposal

A project proposed by the Cisco applied science technology labs (CASTL)

## Executive Summary

Big idea of this project is to use the Ethereum blockchain as a place where endpoints reference contracts to discover where to send data.  

It works as follows:

1.  An endpoint, which may be a Raspberry Pi with a sensor of some type has a flow of real time data.  This data could be temperature, motion, sounds, etc.  The endpoint has the ability to send this stream of data to anywhere on the Internet. 

1.  The blockchain holds a contract specific to that endpoint or group of endpoints that specify a URL list of destinations where the data should be sent.  The endpoint references this contract when deciding who to send data to.  

1.  The contract is for a fixed amount and for a predetermined time.  Any user can enter into the contract with the endpoint.  There will be a fixed amount to pay and this creates a decentralized market for endpoint data and places to send data to.  

#### Example

Suppose Bob has a Raspberry Pi device with a GPU and a camera that is running [YOLO](https://pjreddie.com/darknet/yolo/).  Bob has his camera pointed at a busy intersection of Berlin out of his window pointing down on the street corner.  The data generated by this device may be an array of time stamps:

```json
[
{"2011-09-11 10:48:38.23": {"persons" : 4, "umbrellas": 3, "chairs": 5, "motorbike": 1, "cellphone": 3}},
{"2011-09-11 10:48:39.23": {"persons" : 8, "umbrellas": 3, "chairs": 5, "cars": 4 }}
...
]
```
Here the data being generated is a list of things that this device is able to see.  

Alice may want access to this real time data for use into an application that uses information to predict rush hour traffic patterns between the hours of 4-7PM every night.  

Bob registers his application with Ethereum so that anyone in the world can form a contract with him for him to send that data out.  Alice registers through the blockchain with Bob to have access to his data Monday - Friday from 4-7PM for the next 2 months.  

Alice's contract stipulates the terms: 

```json
{
  "contract_address": "0x123...",
  "schedule": {
    "monday" : {"begin": "16:00", "end": "19:00"}, 
    "tuesday" : {"begin": "16:00", "end": "19:00"}, 
    "wednesday" : {"begin": "16:00", "end": "19:00"}, 
    "thursday" : {"begin": "16:00", "end": "19:00"}, 
    "friday" : {"begin": "16:00", "end": "19:00"}, 
    "begin_date": "2017-09-11",
    "end_date": "2017-11-11"
  },
  "payment": "0.1"
}
```
This contract essentially tells Bob's smart contract to append a URL to the list of addresses Bob may already have:
Before the contract with Alice, bob's state is:

```
urls: ["foo.example.com", "foo.ejemplo.com"]
```
During the hours specified in the contract the variable URLs adds Alice's URL to the list: 

```
urls: ["foo.example.com", "foo.ejemplo.com", "injest.aliceserver.com"]
```
Bob's YOLO application checks the urls list and sends data to these URLs in a constant stream.  

By entering into this contract Alice is paying Bob using Ether to get this data thus he is incentivized to get her the data.  Either party may cancel the transaction at any given time. 

### Project Scope

1. Objective 1: Raspberry Pi's with connected Devices
1. Objective 2: Smart Contracts 
1. Objective 3: Centralized Web Interface

#### Objective 1:  Raspberry Pi's with connected Devices

* Install Linux on Raspberry Pi
* Install Sensor on Raspberry Pi
* Write code that gets data from these sensors and prints them out in real time. 
* Update code to references a file ```~/urls.json``` and checks every minute for changes to this file.  Instead of printing to the screen print data to those URLs. 

#### Objective 2:  Smart Contract

* Install private Ethereum chain on several Raspberry Pis.  
* Write a solidity contract that references a device.  The contract will have the device's public key as data that can not be changed.  
* Send contracts that update the state of the URL list. 
* Figure out how to use smart contracts to update the URL list based on time of day, etc. 
* Have the RP use the ```json-rpc``` to read the URL list as opposed to the ```~/urls.json``` file.  

#### Objective 3:  Centralized Web Server
* WebServer uses a local ```json-rpc``` calls to determine what nodes are in the system and where they are currently sending data. 
* Lists potential nodes that have registered in this blockchain that users may wish to stream. 


## FAQ

#### Can't you just use a database for this? 

Yes, but in this way the market is completely decentralized using Ethereum and no one controls who gets the data.  Parties enter agreements to themselves. The middleman becomes the miners and the data providers get more of the profits. 

#### What type of data can be provided by the RP?

Really anything they want.  audio, video, temperatures, climate, number of birds at a given time, etc.  

#### Who would want this data? 

People developing applications who lack data sources.  There are probably use cases we haven't even thought of. 

#### Why use a blockchain? 

To show how a blockchain could be used in a decentralized environment. 



